		ORG	0000H
		SJMP	MAIN

		ORG	000BH
		ACALL	CLOCK_AD

MAIN:
		SETB	EA
		MOV	TMOD, #00100001B	; TIMER 1, CONTROLE POR SOFTWARE
		MOV	TH0, #0FFH
		MOV	TL0, #0FEH
		SETB	TR0
		MOV	TH1, #0FDH
		MOV	TL1, #0FFH
		SETB	TR1
MAIN_LOOP:
		ACALL	READ_AD
		SJMP	MAIN_LOOP

; READ_AD: LEITURA DOS SENSORES EM ORDEM CRESCENTE.
READ_AD:
		MOV	P0, #00H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #00H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #01H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #02H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #03H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #04H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #05H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #06H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #06H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE

		MOV	P0, #07H
		JB	P3.5, $
		MOV	A, P1
		ACALL	SEND_VALUE
		RET
CLOCK_AD:
		CLR	EA
		CLR	TR0
		CPL	P3.4		; CLOCK A/D
		MOV	TH1, #0FFH
		MOV	TL1, #0FEH
		SETB	EA
		SETB	TR1
		RETI

SEND_VALUE:
		MOV	SCON, #40H	; MODO 1 DO CANAL SERIAL
		MOV	SBUF, A
		JNB	TI, $
		CLR	TI
		RET
		END